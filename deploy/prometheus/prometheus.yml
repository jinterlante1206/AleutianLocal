# Copyright (C) 2025 Aleutian AI (jinterlante@aleutian.ai)
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU Affero General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
# See the LICENSE.txt file for the full license text.

# Prometheus configuration for Aleutian observability stack
# This scrapes metrics from the Code Buddy service.

global:
  scrape_interval: 15s
  evaluation_interval: 15s

scrape_configs:
  # Aleutian Code Buddy service
  # Podman options for reaching host:
  #   - host.containers.internal:9090 (podman 4.1+)
  #   - 10.0.2.2:9090 (slirp4netns default gateway)
  #   - host.docker.internal:9090 (if using podman-docker compatibility)
  - job_name: 'aleutian'
    static_configs:
      - targets: ['host.containers.internal:9090']
        labels:
          service: 'code_buddy'
          environment: 'development'

  # Prometheus self-monitoring
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']
